load("//python/venv:defs.bzl", "py_venv_test")
load("//python/venv/private/tests/data_dir/private:directory_maker.bzl", "directory_maker")

# Create a directory with nested files using declare_directory
directory_maker(
    name = "test_data_directory",
    content = "La-Li-Lu-Le-Lo",
)

# Test that accesses the directory via runfiles
py_venv_test(
    name = "data_dir_test",
    srcs = ["data_dir_test.py"],
    data = [":test_data_directory"],
    env = {
        "DATA_DIR": "$(rlocationpath :test_data_directory)",
    },
    deps = [
        "//python/runfiles",
    ],
)
